<div class="dashboard-container">
  <h2>ðŸ“Š Admin Dashboard - Role: {{ role }}</h2>

  <!-- Add new metric -->
  <div *ngIf="role !== 'viewer'" class="add-metric-form">
    <input [(ngModel)]="newMetric.name" placeholder="Metric Name" />
    <input [(ngModel)]="newMetric.value" type="number" placeholder="Value" />
    <button (click)="addMetric()">âž• Add Metric</button>
  </div>

  <!-- Charts -->
  <div class="charts">
    <canvas baseChart [data]="chartData" chartType="bar"></canvas>
    <canvas baseChart [data]="lineChartData" chartType="line"></canvas>
    <canvas baseChart [data]="pieChartData" chartType="pie"></canvas>
  </div>

  <!-- Metric cards -->
  <div *ngFor="let metric of metrics" class="metric-card">
    <h3>{{ metric.name }}</h3>
    <p>Value: {{ metric.value }}</p>

    <div style="display: flex; gap: 10px; align-items: center">
      <button *ngIf="role !== 'viewer'" (click)="askAI(metric)">ðŸ¤– Ask AI</button>
      <button *ngIf="role !== 'viewer'" (click)="deleteMetric(metric._id)">ðŸ—‘ Delete</button>
    </div>
  </div>

  <!-- AI Explanation -->
  <div *ngIf="explanation">
    <h4>AI Explanation for {{ selectedMetric?.name }}</h4>
    <p>{{ explanation }}</p>
  </div>

  <!-- AI Prediction -->
  <div style="display: flex; flex-direction: column; gap: 10px">
    <button (click)="predictAI()" style="width: 250px">ðŸ”® Predict Next Month</button>
    <p *ngIf="prediction">{{ prediction }}</p>

    <button (click)="exportCSV()" style="width: 250px">ðŸ“‚ Export CSV</button>
  </div>
</div>
